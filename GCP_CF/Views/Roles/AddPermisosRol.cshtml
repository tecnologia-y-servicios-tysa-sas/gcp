@model IEnumerable<GCP_CF.Models.PermisosRoles>
@{
    ViewBag.Title = "Adicionar Permiso";
}

<h2>Adicionar Permiso</h2>

@using (Html.BeginForm("AddPermisosRol", "Roles", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    @Html.HiddenFor(model => model.FirstOrDefault().RolId)
    @Html.HiddenFor(model => model.FirstOrDefault().PermisoId)
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <div class="panel">
        <div class="panel-heading">
            <h3>
                <i class="glyphicon glyphicon-cog"></i> @ViewBag.NombreRol
            </h3>
        </div>

        <div class="panel-body">

            <div class="form-horizontal">

                <div class="form-group">
                    <div class="col-md-2 text-right">
                        Permisos
                    </div>
                    <div class="col-md-4">
                        @*@Html.DropDownList("PermisosId", null, "Seleccione Permisos", htmlAttributes: new { @class = "form-control" })*@
                        @Html.ListBox("PermisosId", ViewBag.PermisosId as MultiSelectList, htmlAttributes: new { @class = "chosen-select" })
                        @*@Html.ValidationMessageFor(model => model.PermisosRoles.FirstOrDefault().PermisoId, "", new { @class = "text-danger" })*@
                    </div>


                </div>
            </div>
        </div>
    </div>
    <div class="btn-block text-center">
        <input type="submit" value="Adicionar Permiso" class="btn btn-default" />
        <a href="@Url.Action("Index", "Roles")" class="btn btn-success">
            <i class="glyphicon glyphicon-list"></i> Regresar al Listado
        </a>
    </div>
    <hr />

    <div class="panel">
        <div class="panel-heading">
            <h3>
                <i class="glyphicon glyphicon-list"></i> Permisos
            </h3>
        </div>

        <div class="panel-body">

            <div class="form-horizontal">

                <table class="table table-bordered" style="width: 100%">
                    <thead>
                        <tr>
                            <th class="head-table">
                                Permiso
                            </th>
                            <th class="head-table">
                                @Html.DisplayNameFor(model => model.Estado)
                            </th>
                            <th class="head-table">Editar</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td class="border-cell">
                                    @Html.DisplayFor(modelItem => item.Permisos.Descripción)
                                </td>
                                <td class="border-cell">
                                    @Html.DisplayFor(modelItem => item.Estado)
                                </td>
                                <td class="border-cell">
                                    @Html.ActionLink("Editar", "EditPermisos", new { id = item.PermisosRolesId })
                                </td>
                            </tr>
                        }
                    </tbody>

                </table>
            </div>
        </div>
    </div>

    @*<div class="modal fade" id="EditPermisos" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" style="width:30%">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body"><div class="te">Please wait...</div></div>
                    <div class="modal-footer">
                        <button type="button" class="btn2 btn-secondary" data-dismiss="modal">Salir</button>
                    </div>
                </div>
            </div>
        </div>*@



}

@*<script src="~/Scripts/jquery-1.10.2.js"></script>


    <script type="text/javascript">

            $(document).ready(function () {
                $("body").on("click", "a.dialog-window", null, function (e) {
                    e.preventDefault();
                    var $link = $(this);
                    var title = $link.text();
                    $('#EditPermisos .modal-title').html(title);
                    var url = $(this).attr('href');
                    if (url.indexOf('#') == 0) {
                        $('#EditPermisos').modal('show');
                    }
                    else {
                        $.get(url, function (data) {
                            $('#EditPermisos .te').html(data);
                            $('#EditPermisos').modal();
                        }).success(function () { $('input:text:visible:first').focus(); });

                    }
                });
            });

        </script>*@


